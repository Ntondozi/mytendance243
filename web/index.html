<!DOCTYPE html>
<html>
<head>
  <base href="$FLUTTER_BASE_HREF">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- indexation Google  sur le site mytendance243--> 
  <meta name="google-site-verification" content="64cOlFCou9yQwwY9EOS37uzwqs4e9yOf9qo0UKJTTI8" />

  <!-- indexation Google  sur le site tendanceofficiel 
  <meta name="google-site-verification" content="64cOlFCou9yQwwY9EOS37uzwqs4e9yOf9qo0UKJTTI8" /> -->

  <!-- SEO -->
  <meta name="description" content="My Tendance 243 - Boutique, Achetez et vendez vos produits en ligne facilement.">
  <meta name="keywords" content="My tendance 243, tendance Officiel, boutique en ligne, achat en ligne, ecommerce, congo, marketplace, afrique">
  <meta name="author" content="Tendance">
  <meta name="robots" content="index, follow">
  <meta name="googlebot" content="index, follow">
  <meta property="og:site_name" content="My Tendance 243 Officiel">
  <meta property="og:title" content="My Tendance 243 - Marketplace">
  <meta property="og:description" content="Achetez et vendez vos produits facilement.">
  <meta property="og:url" content="https://mytendance243.web.app/">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://mytendance243.web.app/favicon.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="My Tendance 243 - Marketplace">
  <meta name="twitter:description" content="Achetez et vendez vos produits facilement.">
  <meta name="twitter:image" content="https://mytendance243.web.app/favicon.png">


  <title>My Tendance 243 Officiel</title>

  <!-- Manifest & favicon -->
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" href="favicon.png"/>
  <meta name="theme-color" content="#0175C2">

  <!-- iOS meta -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Tendance">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">

  <!-- Splash screen animation -->
  <style>
    #splash {
      position: fixed; top:0; left:0; width:100%; height:100%;
      background: #ffffff;
      display:flex; align-items:center; justify-content:center;
      z-index: 99999;
    }
    #splash-logo {
      width: 130px;
      animation: heartbeat 1.4s infinite ease-in-out;
    }
    @keyframes heartbeat {
      0% {transform: scale(1);}
      20% {transform: scale(1.10);}
      40% {transform: scale(0.95);}
      60% {transform: scale(1.15);}
      80% {transform: scale(0.97);}
      100% {transform: scale(1);}
    }
  </style>

  <script>
    const path = window.location.pathname;
    const canonical = document.createElement('link');
    canonical.rel = 'canonical';
    canonical.href = 'https://mytendance243.web.app' + path;
    document.head.appendChild(canonical);
 </script>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "My Tendance 243",
  "url": "https://mytendance243.web.app/",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://mytendance243.web.app/search?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SiteNavigationElement",
  "name": ["Accueil", "Se connecter", "Inscription"],
  "url": [
    "https://mytendance243.web.app/",
    "https://mytendance243.web.app/login",
    "https://mytendance243.web.app/signup"
  ]
}
</script>

</head>
<body>
  <!-- SPLASH SCREEN -->
  <div id="splash">
    <img src="https://firebasestorage.googleapis.com/v0/b/tendance-52721.firebasestorage.app/o/logo.png?alt=media&token=7bb0f964-11fe-45d6-98c8-5c59b211d068" id="splash-logo" alt="loading...">
  </div>

  <!-- Flutter bootstrap -->
  <script src="flutter_bootstrap.js" async></script>
  <script src="main.dart.js" type="module"></script>

  <script>
    // Supprimer le splash après le premier frame Flutter
    window.addEventListener("flutter-first-frame", function () {
      document.getElementById("splash")?.remove();
    });

    // Enregistrer et forcer la mise à jour de Firebase Messaging SW
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('firebase-messaging-sw.js', { updateViaCache: 'none' })
      .then(registration => {
        console.log('Firebase SW enregistré:', registration);
        registration.update(); // force la dernière version

        // Force update de tous les SW existants
        navigator.serviceWorker.getRegistrations().then(registrations => {
          for (let reg of registrations) reg.update();
        });
      })
      .catch(error => console.warn('Erreur SW Firebase:', error));
    }
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.getRegistrations().then(registrations => {
          for (let reg of registrations) {
            reg.update();
          }
        });
      }


    // Fonction pour demander la permission notifications
    function requestNotificationPermission() {
      if (!('Notification' in window)) return Promise.resolve('denied');
      return Notification.requestPermission();
    }
  </script>
</body>
</html>
